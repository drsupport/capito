function ajax(a,b,c){var d=new XMLHttpRequest;d.open("POST",a,!0),d.setRequestHeader("Content-Type","application/json"),d.onreadystatechange=function(){4==this.readyState&&c(200==this.status?this.responseText:this.responseText)},d.send(b)}var page=require("webpage").create(),system=require("system"),url="https://wordstat.yandex.ru/#!/history?words=test",args=system.args;page.open(url,function(a){page.includeJs("https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js",function(){page.evaluate(function(a){var c=(document.getElementsByClassName("b-domik_type_popup")[0],document.getElementById("b-domik_popup-username")),d=document.getElementById("b-domik_popup-password");c.value=a[3],d.value=a[4],console.log("login/password"),$(document).ready(function(){$(".b-form-button__input").click()}),console.log("log in")},args),setTimeout(function(){page.evaluate(function(){$(document).ready(function(){$(".b-form-button__input").click()})})},5e3),setTimeout(function(){page.evaluate(function(){var a=document.getElementsByClassName("b-popupa__content")[0],b=a.getBoundingClientRect();return b},"clipRect");page.clipRect={top:174,left:395,width:175,height:71};var b=page.renderBase64("PNG"),c='{"clientKey":"003fa7c1cd658bca6016eae7c179f012","task":{"type":"ImageToTextTask","body":"'+b+'","phrase":false,"case":false,"numeric":false,"math":0,"minLength":0,"maxLength":0}}';ajax("http://api.anti-captcha.com/createTask",c,function(a){var a=JSON.parse(a);console.log("antigate decoding ... task: "+a.taskId);var b='{"clientKey":"003fa7c1cd658bca6016eae7c179f012","taskId":"'+a.taskId+'"}',c=setInterval(function(){ajax("http://api.anti-captcha.com/getTaskResult",b,function(a){var a=JSON.parse(a);"ready"==a.status&&(console.log("antigate decode: "+a.solution.text),clearInterval(c),phantom.exit())})},1e4)})},1e4)})});